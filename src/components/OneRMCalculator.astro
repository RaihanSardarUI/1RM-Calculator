---
// 1RM Calculator Component
---

<div class="max-w-6xl mx-auto sm:px-6 lg:px-8">
	<div class="grid lg:grid-cols-2 gap-6 lg:gap-8">
		<!-- Calculator Input Section - Mobile Optimized -->
		<div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-4 sm:p-6 lg:p-8 border border-slate-700/50 shadow-2xl">
			<h2 class="text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-purple-300 text-center lg:text-left">Calculate Your 1RM</h2>
			
			<form id="rm-calculator-form" class="space-y-4 sm:space-y-6">
				<!-- Exercise Selection -->
				<div>
					<label for="exercise" class="block text-sm sm:text-base font-medium text-slate-300 mb-2">
						Exercise
					</label>
					<select id="exercise" class="w-full px-4 py-3 sm:py-3.5 bg-slate-700/80 backdrop-blur-sm border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:outline-none transition-all duration-200 text-sm sm:text-base appearance-none cursor-pointer">
						<option value="bench-press">ğŸ‹ï¸ Bench Press</option>
						<option value="squat">ğŸ¦µ Squat</option>
						<option value="deadlift">ğŸ’ª Deadlift</option>
						<option value="overhead-press">ğŸ”¥ Overhead Press</option>
						<option value="other">âš¡ Other Exercise</option>
					</select>
				</div>

				<!-- Weight Input -->
				<div>
					<label for="weight" class="block text-sm sm:text-base font-medium text-slate-300 mb-2">
						Weight Lifted
					</label>
					<div class="flex gap-2 sm:gap-3">
						<input 
							type="number" 
							id="weight" 
							placeholder="Enter weight" 
							step="0.5"
							min="1"
							max="999"
							class="flex-1 px-4 py-3 sm:py-3.5 bg-slate-700/80 backdrop-blur-sm border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:outline-none transition-all duration-200 text-sm sm:text-base"
							required
							aria-describedby="weight-help"
							inputmode="decimal"
						>
						<label for="unit" class="sr-only">Weight unit</label>
						<select id="unit" class="px-4 py-3 sm:py-3.5 bg-slate-700/80 backdrop-blur-sm border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:outline-none transition-all duration-200 text-sm sm:text-base min-w-[80px] cursor-pointer" aria-label="Select weight unit">
							<option value="lbs">lbs</option>
							<option value="kg">kg</option>
						</select>
					</div>
					<p id="weight-help" class="text-xs sm:text-sm text-slate-400 mt-1.5">Enter the weight you lifted and select the unit</p>
				</div>

				<!-- Reps Input -->
				<div>
					<label for="reps" class="block text-sm sm:text-base font-medium text-slate-300 mb-2">
						Repetitions Performed
					</label>
					<input 
						type="number" 
						id="reps" 
						placeholder="Enter reps (1-15)" 
						min="1"
						max="15"
						class="w-full px-4 py-3 sm:py-3.5 bg-slate-700/80 backdrop-blur-sm border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:outline-none transition-all duration-200 text-sm sm:text-base"
						required
						inputmode="numeric"
						aria-describedby="reps-help"
					>
					<p id="reps-help" class="text-xs sm:text-sm text-slate-400 mt-1.5">Most accurate for 1-10 reps</p>
				</div>

				<!-- Formula Selection -->
				<div>
					<label for="formula" class="block text-sm sm:text-base font-medium text-slate-300 mb-2">
						Formula
					</label>
					<select id="formula" class="w-full px-4 py-3 sm:py-3.5 bg-slate-700/80 backdrop-blur-sm border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:outline-none transition-all duration-200 text-sm sm:text-base appearance-none cursor-pointer">
						<option value="epley">ğŸ“Š Epley (Most Common)</option>
						<option value="brzycki">ğŸ¯ Brzycki (Conservative)</option>
						<option value="lombardi">ğŸ’ª Lombardi (Advanced)</option>
						<option value="oconner">ğŸ”¥ O'Conner (Beginner-Friendly)</option>
						<option value="all">âš¡ Compare All Formulas</option>
					</select>
				</div>

				<!-- Buttons -->
				<div class="flex flex-col sm:flex-row gap-3 pt-2 sm:pt-4">
					<button 
						type="submit"
						class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 active:from-purple-800 active:to-pink-800 text-white font-semibold py-3.5 sm:py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-slate-800"
						id="calculate-btn"
					>
						<span class="flex items-center justify-center gap-2">
							<span>Calculate 1RM</span>
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
							</svg>
						</span>
					</button>
					<button 
						type="button"
						id="clear-btn"
						class="w-full sm:w-auto px-6 py-3.5 sm:py-3 bg-slate-600/80 hover:bg-slate-500 active:bg-slate-700 text-white font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-800"
					>
						<span class="flex items-center justify-center gap-2">
							<span>Clear</span>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
							</svg>
						</span>
					</button>
				</div>
			</form>
		</div>

		<!-- Results Section - Mobile Optimized -->
		<div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-4 sm:p-6 lg:p-8 border border-slate-700/50 shadow-2xl">
			<h2 class="text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-purple-300 text-center lg:text-left">Results</h2>
			
			<div id="results-container" class="hidden">
				<!-- 1RM Results -->
				<div id="rm-results" class="mb-6 sm:mb-8">
					<h3 class="text-base sm:text-lg font-medium text-slate-200 mb-3 sm:mb-4">Your 1RM</h3>
					<div id="rm-display" class="space-y-2 sm:space-y-3">
						<!-- Results will be populated by JavaScript -->
					</div>
				</div>

				<!-- Percentage Breakdown -->
				<div id="percentage-breakdown" class="mb-6 sm:mb-8">
					<h3 class="text-base sm:text-lg font-medium text-slate-200 mb-3 sm:mb-4">Training Percentages</h3>
					<div class="grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 text-sm">
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">95%</div>
							<div id="percent-95" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Max effort</div>
						</div>
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">90%</div>
							<div id="percent-90" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Heavy singles</div>
						</div>
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">85%</div>
							<div id="percent-85" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Strength</div>
						</div>
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">80%</div>
							<div id="percent-80" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Power</div>
						</div>
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">75%</div>
							<div id="percent-75" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Hypertrophy</div>
						</div>
						<div class="bg-slate-700/50 rounded-lg p-3 hover:bg-slate-700/70 transition-colors duration-200">
							<div class="text-slate-400 text-xs sm:text-sm">70%</div>
							<div id="percent-70" class="text-white font-semibold text-sm sm:text-base">-</div>
							<div class="text-slate-500 text-xs mt-1">Volume</div>
						</div>
					</div>
				</div>

				<!-- Rep Range Calculator -->
				<div id="rep-range-calculator">
					<h3 class="text-base sm:text-lg font-medium text-slate-200 mb-3 sm:mb-4">Rep Range Guide</h3>
					<div class="space-y-2 text-sm">
						<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center py-3 px-3 sm:px-4 bg-slate-700/30 rounded-lg hover:bg-slate-700/50 transition-colors duration-200">
							<span class="text-slate-300 text-sm sm:text-base">ğŸ’ª Strength (1-3 reps)</span>
							<span class="text-slate-400 text-xs sm:text-sm">90-100%</span>
							<span id="range-1-3" class="text-white font-semibold text-sm sm:text-base mt-1 sm:mt-0">-</span>
						</div>
						<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center py-3 px-3 sm:px-4 bg-slate-700/30 rounded-lg hover:bg-slate-700/50 transition-colors duration-200">
							<span class="text-slate-300 text-sm sm:text-base">ğŸ”¥ Power (4-6 reps)</span>
							<span class="text-slate-400 text-xs sm:text-sm">80-90%</span>
							<span id="range-4-6" class="text-white font-semibold text-sm sm:text-base mt-1 sm:mt-0">-</span>
						</div>
						<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center py-3 px-3 sm:px-4 bg-slate-700/30 rounded-lg hover:bg-slate-700/50 transition-colors duration-200">
							<span class="text-slate-300 text-sm sm:text-base">ğŸ“ˆ Hypertrophy (8-12 reps)</span>
							<span class="text-slate-400 text-xs sm:text-sm">65-80%</span>
							<span id="range-8-12" class="text-white font-semibold text-sm sm:text-base mt-1 sm:mt-0">-</span>
						</div>
					</div>
				</div>
			</div>

			<div id="no-results" class="text-center text-slate-400 py-8 sm:py-12">
				<div class="text-4xl sm:text-6xl mb-3 sm:mb-4">ğŸ’ª</div>
				<p class="text-sm sm:text-base">Enter your lift details to calculate your 1RM</p>
				<p class="text-xs sm:text-sm text-slate-500 mt-2">Fill out the form to see your results</p>
			</div>
		</div>
	</div>

	<!-- Information Cards - Mobile Optimized -->
	<div class="mt-8 sm:mt-12 grid sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
		<div class="bg-slate-800/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-slate-700/50 hover:bg-slate-800/40 hover:border-purple-500/30 transition-all duration-200 group">
			<div class="text-purple-400 text-2xl mb-3 group-hover:scale-110 transition-transform duration-200">ğŸ“Š</div>
			<h3 class="text-base sm:text-lg font-semibold text-white mb-2">Accurate Formulas</h3>
			<p class="text-slate-300 text-sm leading-relaxed">Uses proven scientific formulas including Epley, Brzycki, Lombardi, and O'Conner methods.</p>
		</div>
		<div class="bg-slate-800/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-slate-700/50 hover:bg-slate-800/40 hover:border-purple-500/30 transition-all duration-200 group">
			<div class="text-purple-400 text-2xl mb-3 group-hover:scale-110 transition-transform duration-200">ğŸ¯</div>
			<h3 class="text-base sm:text-lg font-semibold text-white mb-2">Training Percentages</h3>
			<p class="text-slate-300 text-sm leading-relaxed">Get precise training loads for different rep ranges and intensity zones.</p>
		</div>
		<div class="bg-slate-800/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-slate-700/50 hover:bg-slate-800/40 hover:border-purple-500/30 transition-all duration-200 group sm:col-span-2 lg:col-span-1">
			<div class="text-purple-400 text-2xl mb-3 group-hover:scale-110 transition-transform duration-200">âš¡</div>
			<h3 class="text-base sm:text-lg font-semibold text-white mb-2">Instant Results</h3>
			<p class="text-slate-300 text-sm leading-relaxed">Real-time calculations with beautiful, easy-to-read results display.</p>
		</div>
	</div>
</div>

<script>
	// 1RM Calculation Formulas
	const formulas = {
		epley: (weight, reps) => weight * (1 + reps / 30),
		brzycki: (weight, reps) => weight * (36 / (37 - reps)),
		lombardi: (weight, reps) => weight * Math.pow(reps, 0.10),
		oconner: (weight, reps) => weight * (1 + reps / 40)
	};

	// Format number to 1 decimal place
	const formatWeight = (weight) => Math.round(weight * 10) / 10;

	// Calculate 1RM using specified formula
	function calculate1RM(weight, reps, formula) {
		if (reps === 1) return weight;
		return formulas[formula](weight, reps);
	}

	// Update results display
	function updateResults(weight, reps, selectedFormula, unit) {
		const resultsContainer = document.getElementById('results-container');
		const noResults = document.getElementById('no-results');
		const rmDisplay = document.getElementById('rm-display');

		// Show results container
		resultsContainer.classList.remove('hidden');
		noResults.classList.add('hidden');

		// Calculate and display 1RM results
		rmDisplay.innerHTML = '';
		
		if (selectedFormula === 'all') {
			// Show all formulas
			Object.keys(formulas).forEach(formulaName => {
				const rm = calculate1RM(weight, reps, formulaName);
				const div = document.createElement('div');
				div.className = 'flex justify-between items-center py-2 px-3 bg-slate-700/50 rounded-lg';
				div.innerHTML = `
					<span class="text-slate-300 capitalize">${formulaName}</span>
					<span class="text-white font-semibold text-lg">${formatWeight(rm)} ${unit}</span>
				`;
				rmDisplay.appendChild(div);
			});
		} else {
			// Show single formula result
			const rm = calculate1RM(weight, reps, selectedFormula);
			const div = document.createElement('div');
			div.className = 'text-center p-4 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg border border-purple-500/30';
			div.innerHTML = `
				<div class="text-3xl font-bold text-white mb-1">${formatWeight(rm)} ${unit}</div>
				<div class="text-slate-300 capitalize">${selectedFormula} Formula</div>
			`;
			rmDisplay.appendChild(div);
		}

		// Use the primary formula (first one if "all" is selected) for percentages
		const primaryRM = selectedFormula === 'all' 
			? calculate1RM(weight, reps, 'epley')
			: calculate1RM(weight, reps, selectedFormula);

		// Update percentage breakdown
		const percentages = [95, 90, 85, 80, 75, 70];
		percentages.forEach(percent => {
			const element = document.getElementById(`percent-${percent}`);
			const value = formatWeight(primaryRM * (percent / 100));
			element.textContent = `${value} ${unit}`;
		});

		// Update rep range guide
		document.getElementById('range-1-3').textContent = `${formatWeight(primaryRM * 0.90)}-${formatWeight(primaryRM)} ${unit}`;
		document.getElementById('range-4-6').textContent = `${formatWeight(primaryRM * 0.80)}-${formatWeight(primaryRM * 0.90)} ${unit}`;
		document.getElementById('range-8-12').textContent = `${formatWeight(primaryRM * 0.65)}-${formatWeight(primaryRM * 0.80)} ${unit}`;

		// Smooth scroll to results section after a brief delay
		setTimeout(() => {
			const resultsSection = document.getElementById('results-container');
			if (resultsSection) {
				resultsSection.scrollIntoView({ 
					behavior: 'smooth', 
					block: 'start',
					inline: 'nearest'
				});
			}
		}, 300);
	}

	// Form submission handler
	document.getElementById('rm-calculator-form').addEventListener('submit', function(e) {
		e.preventDefault();
		
		const weight = parseFloat(document.getElementById('weight').value);
		const reps = parseInt(document.getElementById('reps').value);
		const formula = document.getElementById('formula').value;
		const unit = document.getElementById('unit').value;

		// Validation
		if (!weight || !reps || weight <= 0 || reps <= 0 || reps > 15) {
			alert('Please enter valid weight and reps (1-15)');
			return;
		}

		// Update results
		updateResults(weight, reps, formula, unit);
	});

	// Clear button handler
	document.getElementById('clear-btn').addEventListener('click', function() {
		document.getElementById('rm-calculator-form').reset();
		document.getElementById('results-container').classList.add('hidden');
		document.getElementById('no-results').classList.remove('hidden');
	});

	// Real-time calculation on input change
	const inputs = ['weight', 'reps', 'formula', 'unit'];
	inputs.forEach(inputId => {
		document.getElementById(inputId).addEventListener('input', function() {
			const weight = parseFloat(document.getElementById('weight').value);
			const reps = parseInt(document.getElementById('reps').value);
			const formula = document.getElementById('formula').value;
			const unit = document.getElementById('unit').value;

			if (weight && reps && weight > 0 && reps > 0 && reps <= 15) {
				updateResults(weight, reps, formula, unit);
			}
		});
	});
</script>
